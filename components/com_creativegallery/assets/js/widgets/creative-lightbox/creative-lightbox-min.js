!function(i){window.CreativeLightbox=function(t){function e(i){return i.toLowerCase().replace(/(\-[a-z])/g,function(i){return i.toUpperCase().replace("-","")})}function a(i,t,a){s.forEach(function(s){var n=e(s+t);n in i.style&&(i.style[n]=a)})}switch(this.options={transitionDelay:t.transitionDelay||300,minTopValue:t.minTopValue||60,minLeftValue:t.minLeftValue||60,thumbnailWidth:t.thumbnailWidth||150,thumbnailHeight:t.thumbnailHeight||100,captionEnabled:t.captionEnabled||!1,captionHeight:t.captionHeight||100,imageLoadingTimeout:t.imageLoadingTimeout||3e3,imageLazyLoadingTimeout:t.imageLazyLoadingTimeout||5e3,imageLoadStatusCheck:t.imageLoadStatusCheck||30,carouselImagesMargin:t.carouselImagesMargin||5,mapSize:t.mapSize||10,mapIconsMaxVisible:t.mapIconsMaxVisible||20,autoplay:t.autoplay||!1,slideSpeed:t.slideSpeed||10,mapTop:t.mapTop||50},t.carouselMode){case"map":this.options.carouselMode="map";break;case"vertical":this.options.carouselMode="vertical";break;default:this.options.carouselMode="horizontal"}this.currentImageIndex=0,this.currentImageCount=0,this.imageLoaded=!1,this.mainImageCoverTimout=700,this.mainImageCoverTimer="",this.slideTransition="all "+this.options.slideSpeed+"s linear",this.createIcon=function(i){var t=document.createElement("div");return t.className="cg_sprite cl-round-icon cl-hidden "+i,t}.bind(this),this.currentSliding="";var s=["-webkit-","-o-","-moz-","-ms-",""];return this.create=function(){this.element=document.createElement("div"),this.element.className="creative-lightbox cl-hidden",this.closeIcon=this.createIcon("cg_sprite-close-32 cl-close-icon"),this.expandIcon=this.createIcon("cg_sprite-expand-26 cl-expand-icon"),this.options.autoplay?this.playIcon=this.createIcon("cg_sprite-pause-32 cl-play-icon"):this.playIcon=this.createIcon("cg_sprite-play-32 cl-play-icon"),this.nextIcon=this.createIcon("cg_sprite-right-circular-32 cl-next-icon cg_aligned-vertically"),this.prevIcon=this.createIcon("cg_sprite-left-circular-32 cl-prev-icon cg_aligned-vertically"),this.mainArea=document.createElement("div"),this.mainArea.className="cl-main-area",this.mainAreaCover=document.createElement("div"),this.mainAreaCover.className="cl-main-area-cover cover",this.mainAreaContainer=document.createElement("div"),this.mainAreaContainer.className="cl-image-caption-area-container",this.mainImageWrapper=document.createElement("div"),this.mainImageWrapper.className="cl-lightbox-main-image-wrapper",this.mainImage=document.createElement("img"),this.mainImage.className="cl-lightbox-main-image",this.mainImageWrapper.appendChild(this.mainImage),this.mainCaptionWrapper=document.createElement("div"),this.mainCaptionWrapper.className="cl-lightbox-main-caption-wrapper",this.mainCaption=document.createElement("p"),this.mainCaption.className="cl-lightbox-main-caption",this.mainName=document.createElement("h3"),this.mainName.className="cl-lightbox-main-name",this.mainCaptionButton=document.createElement("div"),this.mainCaptionButton.className="cl-lightbox-main-caption-button",this.mainCaptionButton.innerHTML="Hide",this.mainCaptionWrapper.appendChild(this.mainName),this.mainCaptionWrapper.appendChild(this.mainCaption),this.mainCaptionWrapper.appendChild(this.mainCaptionButton),this.mainAreaContainer.appendChild(this.mainAreaCover),this.mainAreaContainer.appendChild(this.mainImageWrapper),this.options.captionEnabled&&this.mainAreaContainer.appendChild(this.mainCaptionWrapper),this.carouselWrapper=document.createElement("div"),this.carouselWrapper.className="cl-lightbox-carousel-wrapper",this.carousel=document.createElement("ul"),"map"===this.options.carouselMode?this.carousel.className="cl-lightbox-carousel cl-map":this.carousel.className="cl-lightbox-carousel",this.carouselNextIcon=this.createIcon("cg_sprite-fast-forward-32 cl-carousel-next-icon"),this.carouselPrevIcon=this.createIcon("cg_sprite-rewind-32 cl-carousel-prev-icon"),this.carouselWrapper.appendChild(this.carousel),this.carouselWrapper.appendChild(this.carouselNextIcon),this.carouselWrapper.appendChild(this.carouselPrevIcon),this.mainLoadingLineWrapper=document.createElement("div"),this.mainLoadingLineWrapper.className="cl-main-loading-line-wrapper",this.mainLoadingLineIndicatior=document.createElement("div"),this.mainLoadingLineIndicatior.className="cl-main-loading-line-indicatior",a(this.mainLoadingLineIndicatior,"transition",this.slideTransition),this.mainLoadingLineWrapper.appendChild(this.mainLoadingLineIndicatior),this.mainLoader=this.getLoader("cl-main-loading"),this.mainHint=document.createElement("div"),this.mainHint.className="cl-main-image-issue-hint";var t=document.createElement("p");t.innerHTML='There are some problems during image loading. Please push following button to try again or "Next" button to view next image.',this.mainHintIcon=this.createIcon("cg_sprite-refresh-32 main-image-refresh-icon"),this.mainHint.appendChild(t),this.mainHint.appendChild(this.mainHintIcon),this.mainAreaCover.appendChild(this.mainLoader),this.mainAreaCover.appendChild(this.mainHint),this.mainArea.appendChild(this.mainLoadingLineWrapper),this.mainArea.appendChild(this.mainAreaContainer),this.mainArea.appendChild(this.carouselWrapper),this.element.appendChild(this.mainArea),this.element.appendChild(this.nextIcon),this.element.appendChild(this.prevIcon),this.element.appendChild(this.closeIcon),this.element.appendChild(this.expandIcon),this.element.appendChild(this.playIcon),i(document.body).append(this.element),this.attachEvents()}.bind(this),this.calculatePossitions=function(){var t=i(window).innerHeight(),e=i(window).innerWidth();"horizontal"===this.options.carouselMode?(this.carouselWrapper.style.height=this.options.thumbnailHeight+2*this.options.carouselImagesMargin+"px",this.carousel.style.top=this.options.carouselImagesMargin+"px",this.carousel.style.left=this.options.carouselImagesMargin+"px"):"map"===this.options.carouselMode?(this.carouselWrapper.style.height=0,this.carouselWrapper.style.zIndex=1e3,this.carouselNextIcon.className="cl-hidden",this.carouselPrevIcon.className="cl-hidden",this.options.captionEnabled?i(this.mainCaptionWrapper).hasClass("cl-hidden")?this.carousel.style.top="-"+this.options.mapTop+"px":this.carousel.style.top="-"+(this.options.captionHeight+this.options.mapTop)+"px":this.carousel.style.top="-"+this.options.mapTop+"px",this.carousel.style.height=this.options.mapSize+2*this.options.carouselImagesMargin+"px"):"vertical"===this.options.carouselMode&&(this.carouselWrapper.style.width=this.options.thumbnailWidth+2*this.options.carouselImagesMargin+"px",this.carouselWrapper.style.height="100%",this.carouselPrevIcon.style.top="10px",this.carouselNextIcon.style.bottom="10px",this.carousel.style.top=this.options.carouselImagesMargin+"px",this.carousel.style.left=this.options.carouselImagesMargin+"px");var a=0,s=0,n=0,o=0,h=0,r=0;if(this.imageLoaded){var l,c,d=Math.max(.1*e,this.options.minLeftValue),p=e-2*d,m=Math.max(.1*t,this.options.minTopValue),u=t-2*m;"vertical"===this.options.carouselMode?(l=u,c=p-parseInt(this.carouselWrapper.style.width)):(l=u-parseInt(this.carouselWrapper.style.height),c=p);var g=this.mainImage.naturalHeight,I=this.mainImage.naturalWidth,f=g/I,b=l/c;f>b?g>l?(r=1*l,h=l/f):(r=g,h=r/f):I>c?(h=c,r=h*f):(h=I,r=h*f)}else a=Math.max(.1*e,this.options.minLeftValue),s=e-2*a,n=Math.max(.1*t,this.options.minTopValue),o=t-2*n,"vertical"===this.options.carouselMode?(r=o,h=s-parseInt(this.carouselWrapper.style.width)):(r=o-parseInt(this.carouselWrapper.style.height),h=s);0!==o||0!==s?(this.mainArea.style.left=a+"px",this.mainArea.style.width=s+"px",this.mainArea.style.top=n+"px",this.mainArea.style.height=o+"px"):("vertical"===this.options.carouselMode?(s=h+this.options.thumbnailWidth+2*this.options.carouselImagesMargin,o=r):"horizontal"===this.options.carouselMode?(s=h,o=r+this.options.thumbnailHeight+2*this.options.carouselImagesMargin):"map"===this.options.carouselMode&&(s=h,o=r),a=(e-s)/2,n=(t-o)/2,this.mainArea.style.left=a+"px",this.mainArea.style.width=s+"px",this.mainArea.style.top=n+"px",this.mainArea.style.height=o+"px",this.mainImage.style.width=h+"px",this.mainImage.style.height=r+"px"),"map"===this.options.carouselMode&&(this.carouselAreaWidth=Math.min(this.currentImageCount,this.options.mapIconsMaxVisible)*(this.options.mapSize+this.options.carouselImagesMargin)-this.options.carouselImagesMargin,this.carousel.style.left=(s-this.carouselAreaWidth)/2+"px",this.carousel.style.width=this.carouselAreaWidth+"px");i(this.mainLoadingLineWrapper).height();this.mainAreaContainer.style.height=r+"px",this.mainAreaContainer.style.width=h+"px",this.mainImageWrapper.style.height=r+"px",this.mainImageWrapper.style.width=h+"px",this.mainCaptionWrapper.style.height=this.options.captionHeight+"px"}.bind(this),this.destroy=function(){}.bind(this),this.getLoader=function(i){function t(i){var t=document.createElement("div");t.className="cg_wBall cg_wBall_"+i;var e=document.createElement("div");return e.className="cg_wInnerBall",t.appendChild(e),t}var e=document.createElement("div");e.className="cg_windows8 "+i;for(var a=1;5>=a;a++){var s=t(a);e.appendChild(s)}return e},this.open=function(t,e){this.currentImageIndex=e,this.renderCarousel(t),this.setMainImage(),this.calculatePossitions(),this.moveCarousel("",!0);var a=e+1;a>=i(this.carousel).find("li").length&&(a=0),this.startLazyLoading(a),setTimeout(function(){i(this.element).removeClass("cl-hidden"),setTimeout(function(){i(this.element).find(".cl-round-icon").removeClass("cl-hidden")}.bind(this),this.options.transitionDelay)}.bind(this),300)}.bind(this),this.renderCarousel=function(t){i(this.carousel).find("li").remove(),this.currentImageCount=t.length;for(var e=0;e<this.currentImageCount;e++){var a=document.createElement("li");if(a.setAttribute("data-thumbnail",t[e].thumbnail),a.setAttribute("data-path",t[e].path),a.setAttribute("data-caption",t[e].caption),a.setAttribute("data-name",t[e].name),a.setAttribute("data-index",e),a.setAttribute("data-preloaded",!1),"horizontal"===this.options.carouselMode){a.style.width=this.options.thumbnailWidth+"px",a.style.height=this.options.thumbnailHeight+"px",a.style.left=e*(this.options.thumbnailWidth+this.options.carouselImagesMargin)+"px";var s=document.createElement("div");s.className="cl-lightbox-carousel-image-cover cover";var n=this.getLoader("cl-loader"),o=this.createIcon("cg_sprite-refresh-26");s.appendChild(n),s.appendChild(o);var h=document.createElement("img");a.appendChild(s),a.appendChild(h),this.carousel.appendChild(a);var r=this.checkIfimageLoaded(a);this.showThumbnailImageLoadIssueHint(e,!1),r.then(function(t){i(t).find(".cover").addClass("cl-hidden")}.bind(this),function(t){var e=i(t).attr("data-index");this.showThumbnailImageLoadIssueHint(e,!0)}.bind(this))}else if("vertical"===this.options.carouselMode){i(this.carouselWrapper).addClass("cl-vertical"),a.style.width=this.options.thumbnailWidth+"px",a.style.height=this.options.thumbnailHeight+"px",a.style.top=e*(this.options.thumbnailHeight+this.options.carouselImagesMargin)+"px";var s=document.createElement("div");s.className="cl-lightbox-carousel-image-cover cover";var n=this.getLoader("cl-loader"),o=this.createIcon("cg_sprite-refresh-26");o.style.top=(this.options.thumbnailHeight-26)/2+"px",o.style.left=(this.options.thumbnailWidth-26)/2+"px",s.appendChild(n),s.appendChild(o);var h=document.createElement("img");a.appendChild(s),a.appendChild(h),this.carousel.appendChild(a);var r=this.checkIfimageLoaded(a);this.showThumbnailImageLoadIssueHint(e,!1),r.then(function(t){i(t).find(".cover").addClass("cl-hidden")}.bind(this),function(t){var e=i(t).attr("data-index");this.showThumbnailImageLoadIssueHint(e,!0)}.bind(this))}else"map"===this.options.carouselMode&&(a.style.width=this.options.mapSize+"px",a.style.height=this.options.mapSize+"px",a.style.left=e*(this.options.mapSize+this.options.carouselImagesMargin)+this.options.carouselImagesMargin+"px",a.style.top=this.options.carouselImagesMargin+"px",a.className="cl-map",this.carousel.appendChild(a))}"map"===this.options.carouselMode?this.attachMapHover():"vertical"===this.options.carouselMode?-1===this.carouselNextIcon.className.search("rotate")&&(this.carouselNextIcon.className=this.carouselNextIcon.className+=" rotate",this.carouselPrevIcon.className=this.carouselPrevIcon.className+=" rotate"):"horizontal"===this.options.carouselMode&&-1===this.carouselNextIcon.className.search("cg_aligned-vertically")&&(this.carouselNextIcon.className=this.carouselNextIcon.className+=" cg_aligned-vertically",this.carouselPrevIcon.className=this.carouselPrevIcon.className+=" cg_aligned-vertically"),this.attachCarouselEvents()}.bind(this),this.refreshCurrentThumbnail=function(t){var e=i(t).attr("data-index"),a=this.checkIfimageLoaded(t);this.showThumbnailImageLoadIssueHint(e,!1),a.then(function(e){var a=i(t).attr("data-index");this.showThumbnailImageLoadIssueHint(a,!0)}.bind(this),function(t){i(t).find(".cover").addClass("cl-hidden")}.bind(this))}.bind(this),this.attachCarouselEvents=function(){i(this.carouselWrapper).on("click","div.cl-round-icon",function(i){i.preventDefault(),-1!==i.target.className.search("cl-carousel-prev-icon")?this.moveCarousel("prev"):-1!==i.target.className.search("cl-carousel-next-icon")&&this.moveCarousel("next")}.bind(this))}.bind(this),this.moveCarousel=function(t,e){var a=0,s=0,n=0,o=0,h=0,r=0;if(e){var l=parseInt(i(this.carousel).find("li.cl-selected").css("left")),c=parseInt(i(this.carousel).find("li.cl-selected").css("top"));isNaN(l)||(a="map"===this.options.carouselMode?this.options.mapIconsMaxVisible%2===0?this.options.mapIconsMaxVisible/2*(this.options.mapSize+this.options.carouselImagesMargin)-l:(this.options.mapIconsMaxVisible-1)/2*(this.options.mapSize+this.options.carouselImagesMargin)-l:(i(this.mainArea).width()-this.options.thumbnailWidth-2*this.options.carouselImagesMargin)/2-l),isNaN(c)||(s=(i(this.mainArea).height()-this.options.thumbnailHeight-2*this.options.carouselImagesMargin)/2-c)}else"prev"===t?"vertical"===this.options.carouselMode?s=this.options.thumbnailHeight+this.options.carouselImagesMargin:"horizontal"===this.options.carouselMode&&(a=this.options.thumbnailWidth+this.options.carouselImagesMargin):"next"===t&&("vertical"===this.options.carouselMode?s=-1*(this.options.thumbnailHeight+this.options.carouselImagesMargin):"horizontal"===this.options.carouselMode&&(a=-1*(this.options.thumbnailWidth+this.options.carouselImagesMargin)));n=parseInt(i(this.carousel).find("li").first().css("left"))+a;var d;d="map"===this.options.carouselMode?this.carouselAreaWidth-this.options.mapSize-2*this.options.carouselImagesMargin:i(this.carouselWrapper).width()-this.options.thumbnailWidth-2*this.options.carouselImagesMargin,h=parseInt(i(this.carousel).find("li").last().css("left"))+a,n>0?a=-1*parseInt(i(this.carousel).find("li").first().css("left")):d>h&&(a=d-parseInt(i(this.carousel).find("li").last().css("left"))),o=parseInt(i(this.carousel).find("li").first().css("top"))+s,o>0&&(s=-1*parseInt(i(this.carousel).find("li").first().css("top"))),r=parseInt(i(this.carousel).find("li").last().css("top"))+s;var p=i(this.carouselWrapper).height()-this.options.thumbnailHeight-2*this.options.carouselImagesMargin;p>r&&(s=p-parseInt(i(this.carousel).find("li").last().css("top"))),i(this.carousel).find("li").each(function(t,e){i(e).css({top:parseInt(i(e).css("top"))+s,left:parseInt(i(e).css("left"))+a})})}.bind(this),this.loadImageByIndex=function(i){this.stopAutoPlay(),void 0!==i&&(this.currentImageIndex=i),this.hideMainImage(),this.mainImageCoverTimer=setTimeout(function(){this.setMainImage(),this.moveCarousel("",!0)}.bind(this),this.mainImageCoverTimout)}.bind(this),this.setMainImage=function(){var t=i(this.carouselWrapper).find("li").eq(this.currentImageIndex)[0];this.mainImageWrapper.setAttribute("data-thumbnail",t.getAttribute("data-thumbnail")),this.mainImageWrapper.setAttribute("data-path",t.getAttribute("data-path")),this.mainImageWrapper.setAttribute("data-caption",t.getAttribute("data-caption")),this.mainImageWrapper.setAttribute("data-name",t.getAttribute("data-name")),this.mainCaption.innerHTML=t.getAttribute("data-caption"),this.mainName.innerHTML=t.getAttribute("data-name"),i(t).siblings("li").removeClass("cl-selected"),i(t).addClass("cl-selected");var e=this.checkIfimageLoaded(this.mainImageWrapper,"image");this.showMainImageLoadIssueMessage(!1),e.then(function(i){this.showMainImage()}.bind(this),function(i){this.showMainImageLoadIssueMessage(!0)}.bind(this))}.bind(this),this.showMainImageLoadIssueMessage=function(t){t?(i(this.mainLoader).hide(),i(this.mainHint).show()):(i(this.mainLoader).show(),i(this.mainHint).hide())}.bind(this),this.showThumbnailImageLoadIssueHint=function(t,e){var a=i(this.carousel).find('li[data-index="'+t+'"]');e?(i(a).find(".cl-loader").hide(),i(a).find(".cg_sprite-refresh-26").show()):(i(a).find(".cl-loader").show(),i(a).find(".cg_sprite-refresh-26").hide())}.bind(this),this.showMainImage=function(){this.imageLoaded=!0,this.calculatePossitions(),this.hideMainImage(),this.mainImageCoverTimer=setTimeout(function(){i(this.mainAreaCover).addClass("cl-hidden"),this.startAutoPlay()}.bind(this),this.mainImageCoverTimout)}.bind(this),this.hideMainImage=function(){i(this.mainAreaCover).removeClass("cl-hidden")}.bind(this),this.showNextImage=function(){this.currentImageIndex++,this.currentImageIndex>=this.currentImageCount&&(this.currentImageIndex=0),this.loadImageByIndex()}.bind(this),this.showPrevImage=function(){this.currentImageIndex--,this.currentImageIndex<0&&(this.currentImageIndex=this.currentImageCount-1),this.loadImageByIndex()}.bind(this),this.checkIfimageLoaded=function(t,e){return"image"!==e&&(e="thumbnail"),"thumbnail"===e?i(t).find("img").attr("src",i(t).attr("data-thumbnail")):i(t).find("img").attr("src",i(t).attr("data-path")),new Promise(function(e,a){this.checkIfLoaded=function(s){return s=s||0,s*this.options.imageLoadStatusCheck>this.options.imageLoadingTimeout&&a(t),s++,i(t).find("img")[0].complete?void e(t):void setTimeout(function(){this.checkIfLoaded(s)}.bind(this),this.options.imageLoadStatusCheck)}.bind(this),this.checkIfLoaded()}.bind(this))}.bind(this),this.close=function(t){setTimeout(function(){i(this.element).find(".cl-round-icon").addClass("cl-hidden"),setTimeout(function(){i(this.element).addClass("cl-hidden")}.bind(this),this.options.transitionDelay)}.bind(this),10)}.bind(this),this.toggleFullscreen=function(){i(this.expandIcon).hasClass("cg_sprite-expand-26")?(i(this.expandIcon).removeClass("cg_sprite-expand-26").addClass("cg_sprite-collapse-26"),this.enterFullScreen()):(i(this.expandIcon).removeClass("cg_sprite-collapse-26").addClass("cg_sprite-expand-26"),this.exitFullScreen())}.bind(this),this.enterFullScreen=function(){var i=this.element;i.requestFullscreen?i.requestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullscreen&&i.webkitRequestFullscreen()}.bind(this),this.exitFullScreen=function(){this.element;document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}.bind(this),this.togglePlayPause=function(){i(this.playIcon).hasClass("cg_sprite-play-32")?(i(this.playIcon).removeClass("cg_sprite-play-32").addClass("cg_sprite-pause-32"),this.startAutoPlay()):(i(this.playIcon).removeClass("cg_sprite-pause-32").addClass("cg_sprite-play-32"),this.stopAutoPlay())}.bind(this),this.attachMapHover=function(){i(this.carousel).off("mouseenter").on("mouseenter","li",function(t){this.currentHovered!==t.target&&i(this.mapToolTip).remove(),this.currentHovered=t.target;var e=t.target,a=1*i(e).offset().top,s=1*i(e).offset().left,n=1*i(this.mainArea).offset().top,o=1*i(this.mainArea).offset().left;this.mapToolTip=document.createElement("div"),this.mapToolTip.className="cl-map-tooltip";var h=document.createElement("img");h.src=i(e).attr("data-thumbnail"),this.mapToolTip.appendChild(h),this.mapToolTip.style.position="absolute",this.mapToolTip.style.height=this.options.thumbnailHeight+"px",this.mapToolTip.style.width=this.options.thumbnailWidth+"px",this.mapToolTip.style.top=a-n-1*this.options.thumbnailHeight-8+"px",this.mapToolTip.style.left=s-o-this.options.thumbnailWidth/2-1+"px",this.mapToolTip.style.zIndex=1002,this.mainArea.appendChild(this.mapToolTip)}.bind(this)),i(this.carousel).off("mouseleave").on("mouseleave","li",function(t){var e=(t.target,i(this.mapToolTip));setTimeout(function(){e.remove()},100)}.bind(this))}.bind(this),this.attachEvents=function(){i(this.element).find(this.closeIcon).on("click",function(i){this.close(i)}.bind(this)),i(this.element).on("click",function(i){i.target===this.element&&this.close(i)}.bind(this)),i(this.element).find(this.expandIcon).on("click",function(i){this.toggleFullscreen()}.bind(this)),i(this.element).find(this.playIcon).on("click",function(i){this.togglePlayPause()}.bind(this)),i(this.element).find(this.nextIcon).on("click",function(i){this.showNextImage()}.bind(this)),i(this.element).find(this.prevIcon).on("click",function(i){this.showPrevImage()}.bind(this)),i(this.mainHintIcon).on("click",function(){this.options.imageLoadingTimeout=10*this.options.imageLoadingTimeout,this.setMainImage()}.bind(this)),i(this.carousel).on("click",function(t){if(i(t.target).hasClass("cg_sprite-refresh-26")){var e=i(t.target).parents("li");this.refreshCurrentThumbnail(e)}var a;"horizontal"===this.options.carouselMode?a=i(t.target).parents("li").attr("data-index"):"map"===this.options.carouselMode?a=i(t.target).attr("data-index"):"vertical"===this.options.carouselMode&&(a=i(t.target).parents("li").attr("data-index")),this.loadImageByIndex(a)}.bind(this)),i(window).on("resize",function(t){this.hideMainImage(),this.calculatePossitions(),this.mainImageCoverTimer=setTimeout(function(){i(this.mainAreaCover).addClass("cl-hidden")}.bind(this),this.mainImageCoverTimout)}.bind(this)),i(window).on("keyup",function(i){switch(i.keyCode){case 37:this.showPrevImage();break;case 39:this.showNextImage();break;case 27:this.close();break;case 32:this.togglePlayPause()}return!1}.bind(this)),i(this.mainCaptionButton).on("click",function(){this.toggleCaptionView()}.bind(this))}.bind(this),this.toggleCaptionView=function(){i(this.mainCaptionWrapper).hasClass("cl-hidden")?(i(this.mainCaptionButton).text("Hide"),i(this.mainCaptionWrapper).removeClass("cl-hidden"),this.options.captionEnabled&&"map"===this.options.carouselMode&&(this.carousel.style.top="-"+(this.options.captionHeight+this.options.mapTop)+"px")):(i(this.mainCaptionButton).text("Show"),i(this.mainCaptionWrapper).addClass("cl-hidden"),this.options.captionEnabled&&"map"===this.options.carouselMode&&(this.carousel.style.top="-"+this.options.mapTop+"px"))}.bind(this),this.startAutoPlay=function(){if(i(this.playIcon).hasClass("cg_sprite-pause-32")){var t=this.newAutoPlayPage();t.then(function(i){this.showNextImage()}.bind(this),function(i){})}}.bind(this),this.stopAutoPlay=function(){i(this.mainLoadingLineIndicatior).addClass("cl-force-fast-transition").width(0),i(this.mainLoadingLineIndicatior)[0].offsetWidth,i(this.mainLoadingLineIndicatior).removeClass("cl-force-fast-transition"),this.currentSliding=""}.bind(this),this.newAutoPlayPage=function(){return new Promise(function(t,e){i(this.mainLoadingLineIndicatior).addClass("cl-no-transition").width(0),i(this.mainLoadingLineIndicatior)[0].offsetWidth,i(this.mainLoadingLineIndicatior).removeClass("cl-no-transition").width("100%");var a=new Date;this.currentSliding=a,setTimeout(function(){this.currentSliding===a?t():e()}.bind(this),1e3*this.options.slideSpeed)}.bind(this))}.bind(this),this.startLazyLoading=function(t){var e=i(this.carousel).find("li"),a=i(this.carousel).find("li").eq(t);if(!this.areAllImagesPreloaded())if(a.attr("data-preloaded")===!0){var s=t+1;s>=e.length&&(s=0),this.startLazyLoading(s)}else{var n=this.checkIfimageLazyLoaded(a);n.then(function(a){i(a).attr("data-preloaded",!0);var s=t+1;s>=e.length&&(s=0),this.startLazyLoading(s)}.bind(this),function(i){this.options.imageLazyLoadingTimeout!==1e3*this.options.slideSpeed&&(this.options.imageLazyLoadingTimeout=1e3*this.options.slideSpeed,this.startLazyLoading(t))}.bind(this))}}.bind(this),this.checkIfimageLazyLoaded=function(t){var e=document.createElement("img");return e.className="cl-dummy-img-tag",i(this.element).append(e),i(e).attr("src",i(t).attr("data-path")),new Promise(function(a,s){this.checkIfLazyLoaded=function(n){return n=n||0,n*this.options.imageLoadStatusCheck>this.options.imageLazyLoadingTimeout&&(i(e).remove(),s(t)),n++,e.complete?void a(t):void setTimeout(function(){this.checkIfLazyLoaded(n)}.bind(this),this.options.imageLoadStatusCheck)}.bind(this),this.checkIfLazyLoaded()}.bind(this))}.bind(this),this.areAllImagesPreloaded=function(){var t=!0,e=0;return i(this.carousel).find("li").each(function(a,s){"false"===i(s).attr("data-preloaded")&&(t=!1,e++)}),t}.bind(this),this.create(),this}}(creativeSolutionsjQuery);